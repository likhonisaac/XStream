<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ultimate Web App with Advanced HLS Video Player and Interactive Features">
    <meta name="keywords" content="video streaming, HLS, advanced player, interactive, web app">
    <meta name="author" content="Your Name or Company">
    <meta property="og:title" content="Ultimate Web App with Advanced Video Player">
    <meta property="og:description" content="Experience the future of web applications with our cutting-edge HLS player and interactive features.">
    <meta property="og:image" content="https://yourdomain.com/path/to/your/image.jpg">
    <meta name="twitter:card" content="summary_large_image">
    <title>Ultimate Web App - Advanced Streaming &amp; Interactive Experience</title>
    
    <!-- CDN Imports -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@1.4.10/dist/hls.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chroma-js@2.4.2/chroma.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js"></script>
    <style>
        /* Global Styles */
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-dark: #121212;
            --text-light: #ffffff;
            --text-dark: #333333;
        }
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--background-dark);
            color: var(--text-light);
        }
        /* Header Styles */
        .header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.3);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        /* Video Player Styles */
        .video-player-container {
            position: relative;
            background: #000;
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
        }
        .video-player {
            width: 100%;
            aspect-ratio: 16/9;
        }
        /* Custom Controls */
        .custom-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        .video-player-container:hover .custom-controls {
            opacity: 1;
        }
        /* Thumbnail Grid */
        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 20px 0;
        }
        .thumbnail-item {
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.3s;
            cursor: pointer;
        }
        .thumbnail-item:hover {
            transform: translateY(-5px);
        }
        .thumbnail-item img {
            width: 100%;
            aspect-ratio: 16/9;
        }
    </style>
</head>
<body>
    <!-- Header with Navbar -->
    <header class="header">
        <nav class="navbar navbar-expand-lg navbar-dark">
            <div class="container-fluid">
                <a class="navbar-brand" href="#"><i class="fas fa-play-circle"></i> UltimateApp</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item"><a class="nav-link" href="#videoPlayer"><i class="fas fa-video"></i> Player</a></li>
                        <li class="nav-item"><a class="nav-link" href="#analytics"><i class="fas fa-chart-bar"></i> Analytics</a></li>
                        <li class="nav-item"><button id="darkModeToggle" class="btn btn-outline-light"><i class="fas fa-moon"></i></button></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="container mt-5">
        <!-- Video Player Section -->
        <section id="videoPlayer">
            <div class="video-player-container">
                <video id="mainPlayer" class="video-player" playsinline></video>
                <div class="custom-controls">
                    <button id="playPauseBtn"><i class="fas fa-play"></i></button>
                    <button id="muteBtn"><i class="fas fa-volume-up"></i></button>
                    <button id="fullscreenBtn"><i class="fas fa-expand"></i></button>
                    <input type="range" id="volumeSlider" min="0" max="100" value="100">
                    <span id="currentTime">0:00 / 0:00</span>
                </div>
            </div>
        </section>

        <!-- Thumbnail Video Grid -->
        <section class="thumbnail-grid" id="thumbnailGrid">
            <!-- Thumbnails populated here by JavaScript -->
        </section>

        <!-- Analytics Section -->
        <section id="analytics" class="mt-5">
            <h2 class="text-center mb-4">Viewing Analytics</h2>
            <canvas id="analyticsChart"></canvas>
        </section>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        // Initialize AOS and global variables
        AOS.init();
        const player = document.getElementById('mainPlayer');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');
        const fullscreenBtn = document.getElementById('fullscreenBtn');
        const volumeSlider = document.getElementById('volumeSlider');
        const currentTime = document.getElementById('currentTime');
        const thumbnailGrid = document.getElementById('thumbnailGrid');
        const colorPalette = document.getElementById('colorPalette');
        const darkModeToggle = document.getElementById('darkModeToggle');

        // Load Video Data
        fetch('https://raw.githubusercontent.com/likhonisaac/XStream/refs/heads/main/video_data.json')
            .then(response => response.json())
            .then(data => {
                for (const videoId in data) {
                    const video = data[videoId];
                    const thumbnail = document.createElement('div');
                    thumbnail.classList.add('thumbnail-item');
                    thumbnail.innerHTML = `<img src="${video.thumbnail}" alt="${video.title}">`;
                    thumbnail.onclick = () => loadVideo(video.video_url);
                    thumbnailGrid.appendChild(thumbnail);
                }
            });

        function loadVideo(videoUrl) {
            player.src = videoUrl;
            player.play();
        }

        // Player Controls
        playPauseBtn.onclick = () => player.paused ? player.play() : player.pause();
        player.onplay = () => playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
        player.onpause = () => playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
        
        muteBtn.onclick = () => {
            player.muted = !player.muted;
            muteBtn.innerHTML = player.muted ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
        };
        
        volumeSlider.oninput = (e) => {
            player.volume = e.target.value / 100;
            muteBtn.innerHTML = player.volume === 0 ? '<i class="fas fa-volume-mute"></i>' : '<i class="fas fa-volume-up"></i>';
        };
        
        fullscreenBtn.onclick = () => player.requestFullscreen();

        // Analytics Chart
        const ctx = document.getElementById('analyticsChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
                datasets: [{
                    label: 'Views',
                    data: [100, 200, 300, 150, 200, 250, 300],
                    borderColor: 'rgba(52, 152, 219, 1)',
                    backgroundColor: 'rgba(52, 152, 219, 0.2)',
                    fill: true
                }]
            }
        });

        // Dark Mode Toggle
        darkModeToggle.onclick = () => {
            document.body.classList.toggle('dark-mode');
            darkModeToggle.innerHTML = document.body.classList.contains('dark-mode') 
                ? '<i class="fas fa-sun"></i>' 
                : '<i class="fas fa-moon"></i>';
        };
    </script>
</body>
</html>
